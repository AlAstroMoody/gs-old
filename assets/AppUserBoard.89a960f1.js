import{c as u,r as p,u as ae,H as G,o as se,h as M,l as oe,a as i,b as c,d as e,n as H,y as n,f as _,q as ne,t as v,F as P,k as z,m as I,z as b,e as h,I as ie,M as re,p as ue,C as ce,N as ve}from"./index.d754835a.js";import{_ as B}from"./RangeSlider.d56f2620.js";import{u as de,s as T}from"./store.6128d89b.js";import me from"./CollapseIcon.c45fa906.js";import fe from"./ExitIcon.934b245f.js";import ge from"./QuestionIcon.f6e5f55d.js";import"./plugin-vue_export-helper.21dcd24c.js";var pe="/gs/images/slot.png";const he={key:1,class:"inset-x-0 z-10 h-[calc(100%-64px)] w-full border-b-0 border-silver bg-gray px-2 md:h-fit md:w-fit md:max-w-[calc(100%-320px)] md:rounded-t-2xl md:border xl:px-6"},xe={class:"flex flex-wrap items-center justify-center"},_e={class:"my-2 flex flex-wrap items-center justify-center overflow-hidden"},be=["src"],we=e("div",{class:"subtitle mx-auto whitespace-nowrap"},'\u041A\u0440\u044F\u0433\u0437 "\u042F\u0434\u0440\u043E"',-1),ye={class:"ml-4 flex w-fit"},ke={class:"mt-auto w-52 md:my-4 md:h-full"},Se={class:"my-auto"},$e={class:"my-2 flex flex-wrap items-center justify-center"},Ce={class:"flex h-fit w-full flex-col flex-wrap md:w-fit md:max-w-[132px]"},Me={class:"m-auto flex w-52 flex-wrap gap-1 md:w-full md:gap-0"},Pe=["onMouseenter"],ze={key:0,class:"absolute right-0 top-0 z-10 rounded-full border border-double border-white"},Ie=["src"],Be={key:2,class:"flex h-16 w-16 bg-silver"},Le={class:"flex flex-wrap"},je={class:"w-44 flex-1 flex-wrap border-r-2 pl-1 pr-4 xl:px-6"},Ne=e("span",{class:"border-b-2"},[e("span",null,[h("\u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 "),e("br"),h("\u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B:")])],-1),Ve={class:"ml-1"},Ae={class:"min-w-[220px] pl-2 pr-1 xl:px-6"},De=e("span",{class:"border-b-2"},[e("span",null,[h(" \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 "),e("br")]),e("span",null,"\u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B:")],-1),Ge={class:"ml-1"},He={key:0,class:"w-full lg:w-fit"},Te=e("span",{class:"border-b-2"},"\u0442\u043E\u0447\u043A\u0438",-1),Fe={class:"flex w-full flex-col gap-2 lg:flex-row"},Ue={class:"flex items-center rounded border px-2 lg:h-52 lg:flex-col"},qe={class:"mx-auto w-4 text-yellow lg:mb-2"},Ee={class:"flex items-center rounded border px-2 lg:h-52 lg:flex-col"},Je={class:"mx-auto w-4 text-red lg:mb-2"},tt={__name:"AppUserBoard",setup(Ke){const F=u(()=>T.maxLevel),{user:l,itemsStats:a,removeItem:U,setLevel:L,changeAttack:q,changeDefense:E}=de(),J=u(()=>{let t=l.goblin.stats.strength+a.value.strength;return S.value&&(t=l.goblin.stats.agility+a.value.agility),$.value&&(t=l.goblin.stats.intelligence+a.value.intelligence),a.value.attack+t}),K=u(()=>a?Math.floor(1+a.value.defence+a.value.agility/3):0),O=u(()=>{let t=a.value.strength*20+a.value.hp;return l.inventory.some(s=>s.id===590)&&(t+=w(590)),l.inventory.some(s=>s.id===592)&&(t+=w(592)),l.inventory.some(s=>s.id===598)&&(t+=w(598)),t}),w=t=>{let s=a.value.strength;return S.value&&(s=a.value.agility),$.value&&(s=a.value.intelligence),[590,598].includes(t)?s*5:t===592?s*4:0},Q=u(()=>a.value.intelligence*(N.value?15:10)+a.value.mp),m=p({}),y=p(!1),j=(t,s)=>{y.value=!!t,t&&(m.value=t,m.value.index=s)},k=u(()=>l.inventory.some(t=>t.id===589)),S=u(()=>l.goblin.mainParam==="\u041B\u043E\u0432\u043A\u043E\u0441\u0442\u044C"),R=u(()=>l.goblin.mainParam==="\u0421\u0438\u043B\u0430"),$=u(()=>l.goblin.mainParam==="\u0418\u043D\u0442\u0435\u043B\u043B\u0435\u043A\u0442"),W=u(()=>[{title:"hp:",value:O},{title:"mp:",value:Q},{title:"\u0441\u0438\u043B\u0430:",value:a.value.strength+(k.value&&R.value?100:0)},{title:"\u043B\u043E\u0432\u043A\u043E\u0441\u0442\u044C:",value:a.value.agility+(k.value&&S.value?100:0)},{title:"\u0438\u043D\u0442\u0435\u043B\u043B\u0435\u043A\u0442:",value:a.value.intelligence+(k.value&&$.value?100:0)},{title:"\u0443\u0440\u043E\u043D:",value:J.value+l.attackPoints*100},{title:"\u0437\u0430\u0449\u0438\u0442\u0430:",value:K.value+l.defencePoints*3}]),X=u(()=>[{title:"\u0443\u0434\u0430\u0447\u0430:",value:a.value.luck||0},{title:"\u043C\u0430\u0433. \u0440\u0435\u0437\u0438\u0441\u0442:",value:`${a.value.resist||0}%`},{title:"c\u043A\u043E\u0440\u043E\u0441\u0442\u044C \u0431\u0435\u0433\u0430:",value:(a.value.ms||0)+l.goblin.stats_increase.ms+l.defencePoints},{title:"c\u043A\u043E\u0440\u043E\u0441\u0442\u044C \u0430\u0442\u0430\u043A\u0438:",value:a.value.as>=500?"max":`${a.value.as||0}%`},{title:"\u0440\u0435\u0433\u0435\u043D. hp:",value:`${a.value.hp_regeneration+Math.floor(a.value.strength/100)||0}/\u0441\u0435\u043A`},{title:"\u0440\u0435\u0433\u0435\u043D. mp:",value:`${Math.floor((a.value.intelligence/100+a.value.mp_regen)*(a.value.mp_regeneration?a.value.mp_regeneration/50:1))}`}]),d=p(!0),{width:f}=ae();G(f,()=>{["xxs","xs","sm"].includes(f.value)&&(d.value=!1)});const g=p(null);G(()=>l,async()=>{!d.value&&g.value&&(g.value.classList.add("animate-ping"),await ve(600),g.value&&g.value.classList.remove("animate-ping"))},{deep:!0}),d.value=!1;const Y=t=>{L(Math.ceil(t)||l.level),localStorage.setItem("level",l.level)},r=p({attack:0,defense:0}),Z=t=>{r.value.attack=Math.round(t)||0,q(r.value.attack),localStorage.setItem("attack",r.value.attack)},ee=t=>{r.value.defense=Math.round(t)||0,E(r.value.defense),localStorage.setItem("defense",r.value.defense)},C=(t,s)=>t==="undefined"?s||0:t;se(()=>{r.value.attack=C(M("attack").value),r.value.defense=C(M("defense").value),L(C(M("level").value,1))});const te=t=>{let s="";return t==="\u0443\u0440\u043E\u043D:"&&(s+="text-yellow "),t==="\u0437\u0430\u0449\u0438\u0442\u0430:"&&(s+="text-red "),l.goblin.mainParam.slice(1)===t.slice(1,-1)&&(s+="text-green"),s},N=u(()=>T.version==="1.4f.fix7");return(t,s)=>{var V;const le=oe("router-link");return d.value?n(l).goblin?(i(),c("div",he,[_(me,{onClick:s[1]||(s[1]=o=>d.value=!d.value),class:"absolute right-2 top-2 z-10"}),e("div",xe,[e("div",_e,[e("img",{src:(V=n(l).goblin)==null?void 0:V.src,alt:"logo",class:"h-16 w-16"},null,8,be),we]),e("div",ye,[e("div",ke,[e("div",Se,[e("div",{class:"mb-one mr-auto w-full rounded-lg border border-second p-1 text-center",style:ne(`background-color: rgb(34, 34, ${34+n(l).level/2})`)}," \u0423\u0440\u043E\u0432\u0435\u043D\u044C "+v(n(l).level)+", "+v(n(l).goblin.name),5),_(B,{value:[n(l).level],range:{min:1,max:F.value},onChange:Y,class:"w-full"},null,8,["value","range"])])])])]),e("div",$e,[e("div",Ce,[e("div",Me,[(i(),c(P,null,z(6,o=>{var A,D;return e("div",{key:o,class:"relative m-one h-16 w-16 border-second bg-slot",onMouseenter:x=>j(n(l).inventory[o-1],o),onMouseleave:s[2]||(s[2]=x=>j({}))},[ie(e("div",{class:"absolute -top-12 whitespace-nowrap rounded-md border border-primary bg-silver p-2 text-primary"},v(m.value.name),513),[[re,y.value&&((A=m.value)==null?void 0:A.name)&&((D=m.value)==null?void 0:D.index)===o]]),n(l).inventory[o-1]?(i(),I(le,{key:0,to:`/item/${n(l).inventory[o-1].id}`},{default:ue(()=>{var x;return[y.value&&((x=m.value)==null?void 0:x.index)===o?(i(),c("button",ze,[_(fe,{onClick:ce(Oe=>n(U)(o),["prevent"]),width:30,height:30,color:"white",class:"duration-500 hover:rotate-90"},null,8,["onClick"])])):b("",!0),n(l).inventory[o-1].src?(i(),c("img",{key:1,src:n(l).inventory[o-1].src,alt:"img"},null,8,Ie)):(i(),c("div",Be,[_(ge,{class:"m-auto"})]))]}),_:2},1032,["to"])):b("",!0)],40,Pe)}),64))])]),e("div",Le,[e("div",je,[Ne,(i(!0),c(P,null,z(W.value,o=>(i(),c("div",{class:H(["flex justify-between",te(o.title)]),key:o.title},[h(v(o.title)+" ",1),e("span",Ve,v(o.value),1)],2))),128))]),e("div",Ae,[De,(i(!0),c(P,null,z(X.value,o=>(i(),c("div",{class:"flex justify-between",key:o.title},[h(v(o.title)+" ",1),e("span",Ge,v(o.value),1)]))),128))])]),N.value?(i(),c("div",He,[Te,e("div",Fe,[e("div",Ue,[e("span",qe,v(r.value.attack),1),(i(),I(B,{key:n(f),value:[r.value.attack],range:{min:0,max:85},onChange:Z,vertical:["lg","xl","xxl"].includes(n(f)),class:"mx-4 h-40 w-full"},null,8,["value","vertical"]))]),e("div",Ee,[e("span",Je,v(r.value.defense),1),(i(),I(B,{key:n(f),value:[r.value.defense],range:{min:0,max:85},onChange:ee,vertical:["lg","xl","xxl"].includes(n(f)),class:"mx-4 h-40 w-full"},null,8,["value","vertical"]))])])])):b("",!0)])])):b("",!0):(i(),c("div",{key:0,class:H(["right-2 h-16 w-16 md:left-2 md:right-auto lg:bottom-2 lg:top-auto",t.$route.name!=="item"?"top-2 md:top-20":"bottom-2 top-auto"])},[e("button",null,[e("img",{class:"relative z-10",src:pe,alt:"logo",onClick:s[0]||(s[0]=o=>d.value=!d.value)}),e("span",{class:"z-0 absolute left-0 top-0 inline-flex w-full rounded-full bg-silver bg-gradient-to-r from-purple opacity-75 lg:h-full",ref_key:"collapse",ref:g},null,512)])],2))}}};export{tt as default};
