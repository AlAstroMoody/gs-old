import{c as v,r as x,G as L,a as c,b as d,d as r,t as b,F as S,k as O,z as $,i as F,H as C,I as y,J as M,e as p,f as w,K as I}from"./index.7c97bcc7.js";import{_ as A}from"./RangeSlider.45e2eba8.js";import{s as V}from"./store.01b5883f.js";const B={class:"rounded-2xl border border-silver bg-gray p-2"},T=["onClick"],U={__name:"AppCommonSelect",props:{options:{default:()=>[],type:Array},defaultValue:{default:"\u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:String}},emits:["getOption"],setup(g,{emit:h}){const m=h,i=g,k=v(()=>[{name:i.defaultValue}].concat(i.options).filter(n=>{var e;return n.name!==((e=u.value)==null?void 0:e.name)})),a=x(!1),t=()=>{a.value=!a.value},_=n=>{a.value=!a.value,n||n===0?u.value=i.options.find(e=>(e==null?void 0:e.id)===n):u.value={name:i.defaultValue,id:void 0},m("getOption",u.value)},u=x({name:"",id:0}),f=x(null);return L(f,()=>a.value=!a.value),(n,e)=>{var s;return c(),d("div",B,[r("label",{class:"block w-full",onClick:t},b(((s=u.value)==null?void 0:s.name)||g.defaultValue),1),a.value?(c(),d("div",{key:0,class:"opacity-100",ref_key:"select",ref:f},[(c(!0),d(S,null,O(k.value,l=>(c(),d("label",{key:l.id,onClick:o=>_(l.id),class:"block w-full py-0 px-2 transition-all hover:bg-second hover:text-primary"},b(l.name||l),9,T))),128))],512)):$("",!0)])}}},z={class:"my-2 flex w-full rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out"},D=r("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," \u043F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E ",-1),G={class:"mx-5 my-1"},E={class:"my-1 flex items-center"},H={class:"my-1 flex items-center"},q={__name:"AppFilter",emits:["filteredItems"],setup(g,{emit:h}){const m=h,i=v(()=>V.entities.items),k=v(()=>V.entities.goblins),a=v(()=>V.maxLevel),t=F({name:"",level:[0,a.value],goblins:[],luck:!1,stealth:!1}),_=e=>{t.level=e,n()},u=e=>{t.goblins=[],e.id&&t.goblins.push(e.name)},f=e=>{t.name=e.target.value},n=()=>{var s;let e=i.value;t.name&&(e=e.filter(l=>l.name.toLowerCase().includes(t.name.toLowerCase()))),e=e.filter(l=>Number(t.level[1])>=(l.level||0)&&(l.level||0)>=Number(t.level[0])),(s=t.goblins)!=null&&s.length&&(e=e.filter(l=>{var o;return(o=l.goblins)==null?void 0:o.some(N=>t.goblins[0]===N)})),t.luck&&(e=e.filter(l=>{var o;return(o=l==null?void 0:l.params)==null?void 0:o.luck})),t.stealth&&(e=e.filter(l=>{var o;return(o=l==null?void 0:l.params)==null?void 0:o.stealth_detection})),m("filteredItems",e)};return C(t,()=>n()),C(i,()=>m("filteredItems",i.value)),(e,s)=>(c(),d(S,null,[r("div",z,[y(r("input",{autocomplete:"off","onUpdate:modelValue":s[0]||(s[0]=l=>t.name=l),placeholder:" ",id:"input",class:"relative z-10 w-full py-4",onInput:s[1]||(s[1]=l=>f(l))},null,544),[[M,t.name]]),D]),p(" \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430 \u043E\u0442: "+b(Math.round(t.level[0]))+" \u0434\u043E: "+b(Math.round(t.level[1]))+" ",1),r("div",G,[w(A,{value:t.level,range:{min:0,max:a.value},onChange:_},null,8,["value","range"])]),p(" \u0438\u0433\u0440\u043E\u0432\u043E\u0439 \u043A\u043B\u0430\u0441\u0441: "),w(U,{options:k.value,onGetOption:u,"default-value":"--\u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u043A\u043B\u0430\u0441\u0441\u043E\u0432--"},null,8,["options"]),r("label",E,[y(r("input",{type:"checkbox",class:"mr-2 h-5 w-5 bg-silver accent-black","onUpdate:modelValue":s[2]||(s[2]=l=>t.luck=l)},null,512),[[I,t.luck]]),p(" \u0441 \u0443\u0434\u0430\u0447\u0435\u0439 ")]),r("label",H,[y(r("input",{type:"checkbox",class:"mr-2 h-5 w-5 bg-silver accent-black","onUpdate:modelValue":s[3]||(s[3]=l=>t.stealth=l)},null,512),[[I,t.stealth]]),p(" \u043E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u0438\u0435 \u043D\u0435\u0432\u0438\u0434\u0438\u043C\u043E\u043A ")])],64))}};export{q as _};
